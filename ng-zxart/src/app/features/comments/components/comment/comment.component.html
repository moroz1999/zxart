<div class="comment">
  <div class="comment-header">
    <app-comment-author [author]="comment.author"></app-comment-author>
    <span class="comment-date">{{ comment.date }}</span>
    
    <div class="comment-actions">
      <button (click)="onReply()" class="button-link">Reply</button>
      <button *ngIf="comment.canEdit" (click)="onEdit()" class="button-link">Edit</button>
      <button *ngIf="comment.canDelete" (click)="onDelete()" class="button-link">Delete</button>
    </div>
  </div>
  
  <div *ngIf="comment.target" class="comment-target">
    Re: <a [href]="comment.target.url">{{ comment.target.title }}</a>
  </div>

  <div class="comment-content" [innerHTML]="comment.content"></div>
  
  <app-comment-form *ngIf="showReplyForm" [targetId]="comment.id" (commentSaved)="onCommentSaved($event)" (cancelled)="showReplyForm = false"></app-comment-form>
  <app-comment-form *ngIf="showEditForm" [targetId]="comment.parentId || 0" [commentToEdit]="comment" (commentSaved)="onCommentSaved($event)" (cancelled)="showEditForm = false"></app-comment-form>
</div>
