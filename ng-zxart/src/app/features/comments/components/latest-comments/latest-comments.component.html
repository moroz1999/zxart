@if (loading()) {
  <zx-panel>
    <zx-skeleton variant="text" [count]="5"></zx-skeleton>
  </zx-panel>
} @else {
  <zx-panel>
    <div zxHeading3 class="latest-comments__title">{{ 'comments.title' | translate }}</div>
    <zx-stack spacing="sm">
      @for (comment of comments(); track comment.id) {
        <div class="latest-comment">
          @if (comment.target) {
            <a [href]="comment.target.url" class="latest-comment__link" zxCaption>
              <zx-user [user]="comment.author" class="latest-comment__author"></zx-user>:
              <span class="latest-comment__content" [innerHTML]="sanitizeHtml(comment.content)"></span>
            </a>
          } @else {
            <span zxCaption>
              <zx-user [user]="comment.author" class="latest-comment__author"></zx-user>:
              <span class="latest-comment__content" [innerHTML]="sanitizeHtml(comment.content)"></span>
            </span>
          }
        </div>
      }
    </zx-stack>

    @if (allCommentsUrl) {
      <a [href]="allCommentsUrl" class="latest-comments__all">
        <zx-button color="secondary" size="sm">{{ 'comments.all-comments' | translate }}</zx-button>
      </a>
    }
  </zx-panel>
}
